\hypertarget{recover_8h}{}\doxysection{/home/bscuser/\+Documents/release/dev/fti/src/recover.h File Reference}
\label{recover_8h}\index{/home/bscuser/Documents/release/dev/fti/src/recover.h@{/home/bscuser/Documents/release/dev/fti/src/recover.h}}
This graph shows which files directly or indirectly include this file\+:
% FIG 0
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{recover_8h_a29f1aae84d9ec782867b16905241e531}{F\+T\+I\+\_\+\+Check\+File}} (char $\ast$fn, long fs, char $\ast$checksum)
\begin{DoxyCompactList}\small\item\em It checks if a file exist and that its size is \textquotesingle{}correct\textquotesingle{}. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{recover_8h_a0d67927230e5cfb7848475129aa3b97c}{F\+T\+I\+\_\+\+Check\+Erasures}} (\mbox{\hyperlink{structFTIT__configuration}{F\+T\+I\+T\+\_\+configuration}} $\ast$F\+T\+I\+\_\+\+Conf, \mbox{\hyperlink{structFTIT__execution}{F\+T\+I\+T\+\_\+execution}} $\ast$F\+T\+I\+\_\+\+Exec, \mbox{\hyperlink{structFTIT__topology}{F\+T\+I\+T\+\_\+topology}} $\ast$F\+T\+I\+\_\+\+Topo, \mbox{\hyperlink{structFTIT__checkpoint}{F\+T\+I\+T\+\_\+checkpoint}} $\ast$F\+T\+I\+\_\+\+Ckpt, int $\ast$erased)
\begin{DoxyCompactList}\small\item\em It detects all the erasures for a particular level. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{recover_8h_aa5ca92e3168d5b1ee7830507f8847dec}{F\+T\+I\+\_\+\+Recover\+Files}} (\mbox{\hyperlink{structFTIT__configuration}{F\+T\+I\+T\+\_\+configuration}} $\ast$F\+T\+I\+\_\+\+Conf, \mbox{\hyperlink{structFTIT__execution}{F\+T\+I\+T\+\_\+execution}} $\ast$F\+T\+I\+\_\+\+Exec, \mbox{\hyperlink{structFTIT__topology}{F\+T\+I\+T\+\_\+topology}} $\ast$F\+T\+I\+\_\+\+Topo, \mbox{\hyperlink{structFTIT__checkpoint}{F\+T\+I\+T\+\_\+checkpoint}} $\ast$F\+T\+I\+\_\+\+Ckpt)
\begin{DoxyCompactList}\small\item\em It decides wich action take depending on the restart level. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{recover_8h_a0d67927230e5cfb7848475129aa3b97c}\label{recover_8h_a0d67927230e5cfb7848475129aa3b97c}} 
\index{recover.h@{recover.h}!FTI\_CheckErasures@{FTI\_CheckErasures}}
\index{FTI\_CheckErasures@{FTI\_CheckErasures}!recover.h@{recover.h}}
\doxysubsubsection{\texorpdfstring{FTI\_CheckErasures()}{FTI\_CheckErasures()}}
{\footnotesize\ttfamily int F\+T\+I\+\_\+\+Check\+Erasures (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structFTIT__configuration}{F\+T\+I\+T\+\_\+configuration}} $\ast$}]{F\+T\+I\+\_\+\+Conf,  }\item[{\mbox{\hyperlink{structFTIT__execution}{F\+T\+I\+T\+\_\+execution}} $\ast$}]{F\+T\+I\+\_\+\+Exec,  }\item[{\mbox{\hyperlink{structFTIT__topology}{F\+T\+I\+T\+\_\+topology}} $\ast$}]{F\+T\+I\+\_\+\+Topo,  }\item[{\mbox{\hyperlink{structFTIT__checkpoint}{F\+T\+I\+T\+\_\+checkpoint}} $\ast$}]{F\+T\+I\+\_\+\+Ckpt,  }\item[{int $\ast$}]{erased }\end{DoxyParamCaption})}



It detects all the erasures for a particular level. 


\begin{DoxyParams}{Parameters}
{\em F\+T\+I\+\_\+\+Conf} & Configuration metadata. \\
\hline
{\em F\+T\+I\+\_\+\+Exec} & Execution metadata. \\
\hline
{\em F\+T\+I\+\_\+\+Topo} & Topology metadata. \\
\hline
{\em F\+T\+I\+\_\+\+Ckpt} & Checkpoint metadata. \\
\hline
{\em erased} & The array of erasures to fill. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
integer F\+T\+I\+\_\+\+S\+C\+ES if successful.
\end{DoxyReturn}
This function detects all the erasures for L1, L2 and L3. It return the results in the erased array. The search for erasures is done at the three levels independently on the current recovery level. \mbox{\Hypertarget{recover_8h_a29f1aae84d9ec782867b16905241e531}\label{recover_8h_a29f1aae84d9ec782867b16905241e531}} 
\index{recover.h@{recover.h}!FTI\_CheckFile@{FTI\_CheckFile}}
\index{FTI\_CheckFile@{FTI\_CheckFile}!recover.h@{recover.h}}
\doxysubsubsection{\texorpdfstring{FTI\_CheckFile()}{FTI\_CheckFile()}}
{\footnotesize\ttfamily int F\+T\+I\+\_\+\+Check\+File (\begin{DoxyParamCaption}\item[{char $\ast$}]{fn,  }\item[{long}]{fs,  }\item[{char $\ast$}]{checksum }\end{DoxyParamCaption})}



It checks if a file exist and that its size is \textquotesingle{}correct\textquotesingle{}. 


\begin{DoxyParams}{Parameters}
{\em fn} & The ckpt. file name to check. \\
\hline
{\em fs} & The ckpt. file size to check. \\
\hline
{\em checksum} & The file checksum to check. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
integer 0 if file exists, 1 if not or wrong size.
\end{DoxyReturn}
This function checks whether a file exist or not and if its size is the expected one. Here is the call graph for this function\+:
% FIG 1
\mbox{\Hypertarget{recover_8h_aa5ca92e3168d5b1ee7830507f8847dec}\label{recover_8h_aa5ca92e3168d5b1ee7830507f8847dec}} 
\index{recover.h@{recover.h}!FTI\_RecoverFiles@{FTI\_RecoverFiles}}
\index{FTI\_RecoverFiles@{FTI\_RecoverFiles}!recover.h@{recover.h}}
\doxysubsubsection{\texorpdfstring{FTI\_RecoverFiles()}{FTI\_RecoverFiles()}}
{\footnotesize\ttfamily int F\+T\+I\+\_\+\+Recover\+Files (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structFTIT__configuration}{F\+T\+I\+T\+\_\+configuration}} $\ast$}]{F\+T\+I\+\_\+\+Conf,  }\item[{\mbox{\hyperlink{structFTIT__execution}{F\+T\+I\+T\+\_\+execution}} $\ast$}]{F\+T\+I\+\_\+\+Exec,  }\item[{\mbox{\hyperlink{structFTIT__topology}{F\+T\+I\+T\+\_\+topology}} $\ast$}]{F\+T\+I\+\_\+\+Topo,  }\item[{\mbox{\hyperlink{structFTIT__checkpoint}{F\+T\+I\+T\+\_\+checkpoint}} $\ast$}]{F\+T\+I\+\_\+\+Ckpt }\end{DoxyParamCaption})}



It decides wich action take depending on the restart level. 


\begin{DoxyParams}{Parameters}
{\em F\+T\+I\+\_\+\+Conf} & Configuration metadata. \\
\hline
{\em F\+T\+I\+\_\+\+Exec} & Execution metadata. \\
\hline
{\em F\+T\+I\+\_\+\+Topo} & Topology metadata. \\
\hline
{\em F\+T\+I\+\_\+\+Ckpt} & Checkpoint metadata. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
integer F\+T\+I\+\_\+\+S\+C\+ES if successful.
\end{DoxyReturn}
This function launches the required action depending on the recovery level. The recovery level is detected from the checkpoint ID of the last checkpoint taken. 