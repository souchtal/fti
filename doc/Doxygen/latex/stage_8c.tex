\hypertarget{stage_8c}{}\doxysection{/home/bscuser/\+Documents/release/dev/fti/src/stage.c File Reference}
\label{stage_8c}\index{/home/bscuser/Documents/release/dev/fti/src/stage.c@{/home/bscuser/Documents/release/dev/fti/src/stage.c}}


helper functions for the F\+TI staging feature.  


{\ttfamily \#include \char`\"{}interface.\+h\char`\"{}}\newline
{\ttfamily \#include $<$libgen.\+h$>$}\newline
Include dependency graph for stage.\+c\+:
% FIG 0
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{stage_8c_a46b8c1f1c37f48eb4261fc646e460478}{F\+T\+I\+\_\+\+Init\+Stage}} (\mbox{\hyperlink{structFTIT__execution}{F\+T\+I\+T\+\_\+execution}} $\ast$F\+T\+I\+\_\+\+Exec, \mbox{\hyperlink{structFTIT__configuration}{F\+T\+I\+T\+\_\+configuration}} $\ast$F\+T\+I\+\_\+\+Conf, \mbox{\hyperlink{structFTIT__topology}{F\+T\+I\+T\+\_\+topology}} $\ast$F\+T\+I\+\_\+\+Topo)
\begin{DoxyCompactList}\small\item\em Initializes the F\+TI staging feature. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{stage_8c_acf6cca854e653c7c23d24011f5b3afc4}{F\+T\+I\+\_\+\+Finalize\+Stage}} (\mbox{\hyperlink{structFTIT__execution}{F\+T\+I\+T\+\_\+execution}} $\ast$F\+T\+I\+\_\+\+Exec, \mbox{\hyperlink{structFTIT__topology}{F\+T\+I\+T\+\_\+topology}} $\ast$F\+T\+I\+\_\+\+Topo, \mbox{\hyperlink{structFTIT__configuration}{F\+T\+I\+T\+\_\+configuration}} $\ast$F\+T\+I\+\_\+\+Conf)
\begin{DoxyCompactList}\small\item\em Finalizes staging feature. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{stage_8c_add93ac9ae93c0bc729d2d68f1617341c}{F\+T\+I\+\_\+\+Init\+Stage\+Request\+App}} (\mbox{\hyperlink{structFTIT__execution}{F\+T\+I\+T\+\_\+execution}} $\ast$F\+T\+I\+\_\+\+Exec, \mbox{\hyperlink{structFTIT__topology}{F\+T\+I\+T\+\_\+topology}} $\ast$F\+T\+I\+\_\+\+Topo, uint32\+\_\+t ID)
\begin{DoxyCompactList}\small\item\em Initializes new stage meta info element (application rank) \end{DoxyCompactList}\item 
int \mbox{\hyperlink{stage_8c_ae4b37a2f01edc58f583e828993eda152}{F\+T\+I\+\_\+\+Init\+Stage\+Request\+Head}} (char $\ast$lpath, char $\ast$rpath, \mbox{\hyperlink{structFTIT__execution}{F\+T\+I\+T\+\_\+execution}} $\ast$F\+T\+I\+\_\+\+Exec, \mbox{\hyperlink{structFTIT__topology}{F\+T\+I\+T\+\_\+topology}} $\ast$F\+T\+I\+\_\+\+Topo, int source, uint32\+\_\+t ID)
\begin{DoxyCompactList}\small\item\em Initializes new stage meta info element (head rank) \end{DoxyCompactList}\item 
int \mbox{\hyperlink{stage_8c_a6e74aba3e759272cbdb8db6ccbb879f2}{F\+T\+I\+\_\+\+Free\+Stage\+Request}} (\mbox{\hyperlink{structFTIT__execution}{F\+T\+I\+T\+\_\+execution}} $\ast$F\+T\+I\+\_\+\+Exec, \mbox{\hyperlink{structFTIT__topology}{F\+T\+I\+T\+\_\+topology}} $\ast$F\+T\+I\+\_\+\+Topo, int ID, int source)
\begin{DoxyCompactList}\small\item\em frees stage meta info element (head/application rank) \end{DoxyCompactList}\item 
int \mbox{\hyperlink{stage_8c_a0c5a2182e719ef3336289bd24f8fd312}{F\+T\+I\+\_\+\+Get\+Request\+Idx}} (int ID)
\begin{DoxyCompactList}\small\item\em returns the index of desired stage meta info element. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{stage_8c_a182f1f60a5374160a724cee0034c572d}{F\+T\+I\+\_\+\+Sync\+Stage}} (char $\ast$lpath, char $\ast$rpath, \mbox{\hyperlink{structFTIT__execution}{F\+T\+I\+T\+\_\+execution}} $\ast$F\+T\+I\+\_\+\+Exec, \mbox{\hyperlink{structFTIT__topology}{F\+T\+I\+T\+\_\+topology}} $\ast$F\+T\+I\+\_\+\+Topo, \mbox{\hyperlink{structFTIT__configuration}{F\+T\+I\+T\+\_\+configuration}} $\ast$F\+T\+I\+\_\+\+Conf, uint32\+\_\+t ID)
\begin{DoxyCompactList}\small\item\em This function synchronously stages the local file to the P\+FS. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{stage_8c_a61d6e550d9f80163986a523bc8f2d33d}{F\+T\+I\+\_\+\+Async\+Stage}} (char $\ast$lpath, char $\ast$rpath, \mbox{\hyperlink{structFTIT__configuration}{F\+T\+I\+T\+\_\+configuration}} $\ast$F\+T\+I\+\_\+\+Conf, \mbox{\hyperlink{structFTIT__execution}{F\+T\+I\+T\+\_\+execution}} $\ast$F\+T\+I\+\_\+\+Exec, \mbox{\hyperlink{structFTIT__topology}{F\+T\+I\+T\+\_\+topology}} $\ast$F\+T\+I\+\_\+\+Topo, int ID)
\begin{DoxyCompactList}\small\item\em This function triggers the asynchronous stage. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{stage_8c_a7e59d3bafaa826d69a91493c80a417e3}{F\+T\+I\+\_\+\+Handle\+Stage\+Request}} (\mbox{\hyperlink{structFTIT__configuration}{F\+T\+I\+T\+\_\+configuration}} $\ast$F\+T\+I\+\_\+\+Conf, \mbox{\hyperlink{structFTIT__execution}{F\+T\+I\+T\+\_\+execution}} $\ast$F\+T\+I\+\_\+\+Exec, \mbox{\hyperlink{structFTIT__topology}{F\+T\+I\+T\+\_\+topology}} $\ast$F\+T\+I\+\_\+\+Topo, \mbox{\hyperlink{structFTIT__checkpoint}{F\+T\+I\+T\+\_\+checkpoint}} $\ast$F\+T\+I\+\_\+\+Ckpt, int source)
\begin{DoxyCompactList}\small\item\em This function asynchronously stages the local file to the P\+FS. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{stage_8c_a1b29cd8c8e9446f2dbd8dafac4d07f05}{F\+T\+I\+\_\+\+Get\+Request\+Field}} (int ID, \mbox{\hyperlink{stage_8h_a05ee3f86e04233d44812d99f1ce02f98}{F\+T\+I\+T\+\_\+\+Request\+Field}} val)
\begin{DoxyCompactList}\small\item\em Returns value from the \textquotesingle{}idx\+Request\textquotesingle{} field array at \textquotesingle{}ID\textquotesingle{}. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{stage_8c_a35eb6e7616b99b2d7713d802327fe061}{F\+T\+I\+\_\+\+Set\+Request\+Field}} (int ID, uint32\+\_\+t entry, \mbox{\hyperlink{stage_8h_a05ee3f86e04233d44812d99f1ce02f98}{F\+T\+I\+T\+\_\+\+Request\+Field}} val)
\begin{DoxyCompactList}\small\item\em Sets value of the \textquotesingle{}idx\+Request\textquotesingle{} field array at \textquotesingle{}ID\textquotesingle{}. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{stage_8c_a03ebd25f6254d11bc790e70e9aabd9eb}{F\+T\+I\+\_\+\+Get\+Status\+Field}} (\mbox{\hyperlink{structFTIT__execution}{F\+T\+I\+T\+\_\+execution}} $\ast$F\+T\+I\+\_\+\+Exec, \mbox{\hyperlink{structFTIT__topology}{F\+T\+I\+T\+\_\+topology}} $\ast$F\+T\+I\+\_\+\+Topo, int ID, \mbox{\hyperlink{stage_8h_a90a1c70f104f770eff8ba0b2febc7887}{F\+T\+I\+T\+\_\+\+Status\+Field}} val, int source)
\begin{DoxyCompactList}\small\item\em Returns value from the \textquotesingle{}status\textquotesingle{} field array at \textquotesingle{}ID\textquotesingle{}. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{stage_8c_ab210803902592adb2ebb22b9a9a28dda}{F\+T\+I\+\_\+\+Set\+Status\+Field}} (\mbox{\hyperlink{structFTIT__execution}{F\+T\+I\+T\+\_\+execution}} $\ast$F\+T\+I\+\_\+\+Exec, \mbox{\hyperlink{structFTIT__topology}{F\+T\+I\+T\+\_\+topology}} $\ast$F\+T\+I\+\_\+\+Topo, int ID, uint8\+\_\+t entry, \mbox{\hyperlink{stage_8h_a90a1c70f104f770eff8ba0b2febc7887}{F\+T\+I\+T\+\_\+\+Status\+Field}} val, int source)
\begin{DoxyCompactList}\small\item\em Sets value from the \textquotesingle{}status\textquotesingle{} field array at \textquotesingle{}ID\textquotesingle{}. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{stage_8c_af704cfca36ed0ca9ab685a838518c114}{F\+T\+I\+\_\+\+Get\+Request\+ID}} (\mbox{\hyperlink{structFTIT__execution}{F\+T\+I\+T\+\_\+execution}} $\ast$F\+T\+I\+\_\+\+Exec, \mbox{\hyperlink{structFTIT__topology}{F\+T\+I\+T\+\_\+topology}} $\ast$F\+T\+I\+\_\+\+Topo)
\begin{DoxyCompactList}\small\item\em Returns unique \textquotesingle{}ID\textquotesingle{} for staging request. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{stage_8c_a11011f5e2b91e35d66c5c39d33aa0aae}{F\+T\+I\+\_\+\+Print\+Stage\+Status}} (\mbox{\hyperlink{structFTIT__execution}{F\+T\+I\+T\+\_\+execution}} $\ast$F\+T\+I\+\_\+\+Exec, \mbox{\hyperlink{structFTIT__topology}{F\+T\+I\+T\+\_\+topology}} $\ast$F\+T\+I\+\_\+\+Topo, int ID, int source)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
helper functions for the F\+TI staging feature. 

header for \mbox{\hyperlink{stage_8c}{stage.\+c}}

Copyright (c) 2017 Leonardo A. Bautista-\/\+Gomez All rights reserved

F\+TI -\/ A multi-\/level checkpointing library for C/\+C++/\+Fortran applications

Revision 1.\+0 \+: Fault Tolerance Interface (F\+TI)

Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met\+:


\begin{DoxyEnumerate}
\item Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
\item Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
\item Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.
\end{DoxyEnumerate}

T\+H\+IS S\+O\+F\+T\+W\+A\+RE IS P\+R\+O\+V\+I\+D\+ED BY T\+HE C\+O\+P\+Y\+R\+I\+G\+HT H\+O\+L\+D\+E\+RS A\+ND C\+O\+N\+T\+R\+I\+B\+U\+T\+O\+RS \char`\"{}\+A\+S I\+S\char`\"{} A\+ND A\+NY E\+X\+P\+R\+E\+SS OR I\+M\+P\+L\+I\+ED W\+A\+R\+R\+A\+N\+T\+I\+ES, I\+N\+C\+L\+U\+D\+I\+NG, B\+UT N\+OT L\+I\+M\+I\+T\+ED TO, T\+HE I\+M\+P\+L\+I\+ED W\+A\+R\+R\+A\+N\+T\+I\+ES OF M\+E\+R\+C\+H\+A\+N\+T\+A\+B\+I\+L\+I\+TY A\+ND F\+I\+T\+N\+E\+SS F\+OR A P\+A\+R\+T\+I\+C\+U\+L\+AR P\+U\+R\+P\+O\+SE A\+RE D\+I\+S\+C\+L\+A\+I\+M\+ED. IN NO E\+V\+E\+NT S\+H\+A\+LL T\+HE C\+O\+P\+Y\+R\+I\+G\+HT H\+O\+L\+D\+ER OR C\+O\+N\+T\+R\+I\+B\+U\+T\+O\+RS BE L\+I\+A\+B\+LE F\+OR A\+NY D\+I\+R\+E\+CT, I\+N\+D\+I\+R\+E\+CT, I\+N\+C\+I\+D\+E\+N\+T\+AL, S\+P\+E\+C\+I\+AL, E\+X\+E\+M\+P\+L\+A\+RY, OR C\+O\+N\+S\+E\+Q\+U\+E\+N\+T\+I\+AL D\+A\+M\+A\+G\+ES (I\+N\+C\+L\+U\+D\+I\+NG, B\+UT N\+OT L\+I\+M\+I\+T\+ED TO, P\+R\+O\+C\+U\+R\+E\+M\+E\+NT OF S\+U\+B\+S\+T\+I\+T\+U\+TE G\+O\+O\+DS OR S\+E\+R\+V\+I\+C\+ES; L\+O\+SS OF U\+SE, D\+A\+TA, OR P\+R\+O\+F\+I\+TS; OR B\+U\+S\+I\+N\+E\+SS I\+N\+T\+E\+R\+R\+U\+P\+T\+I\+ON) H\+O\+W\+E\+V\+ER C\+A\+U\+S\+ED A\+ND ON A\+NY T\+H\+E\+O\+RY OF L\+I\+A\+B\+I\+L\+I\+TY, W\+H\+E\+T\+H\+ER IN C\+O\+N\+T\+R\+A\+CT, S\+T\+R\+I\+CT L\+I\+A\+B\+I\+L\+I\+TY, OR T\+O\+RT (I\+N\+C\+L\+U\+D\+I\+NG N\+E\+G\+L\+I\+G\+E\+N\+CE OR O\+T\+H\+E\+R\+W\+I\+SE) A\+R\+I\+S\+I\+NG IN A\+NY W\+AY O\+UT OF T\+HE U\+SE OF T\+H\+IS S\+O\+F\+T\+W\+A\+RE, E\+V\+EN IF A\+D\+V\+I\+S\+ED OF T\+HE P\+O\+S\+S\+I\+B\+I\+L\+I\+TY OF S\+U\+CH D\+A\+M\+A\+GE.

\begin{DoxyAuthor}{Author}
Kai Keller (\href{mailto:kellekai@gmx.de}{\texttt{ kellekai@gmx.\+de}})
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
July, 2018 
\end{DoxyDate}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{stage_8c_a61d6e550d9f80163986a523bc8f2d33d}\label{stage_8c_a61d6e550d9f80163986a523bc8f2d33d}} 
\index{stage.c@{stage.c}!FTI\_AsyncStage@{FTI\_AsyncStage}}
\index{FTI\_AsyncStage@{FTI\_AsyncStage}!stage.c@{stage.c}}
\doxysubsubsection{\texorpdfstring{FTI\_AsyncStage()}{FTI\_AsyncStage()}}
{\footnotesize\ttfamily int F\+T\+I\+\_\+\+Async\+Stage (\begin{DoxyParamCaption}\item[{char $\ast$}]{lpath,  }\item[{char $\ast$}]{rpath,  }\item[{\mbox{\hyperlink{structFTIT__configuration}{F\+T\+I\+T\+\_\+configuration}} $\ast$}]{F\+T\+I\+\_\+\+Conf,  }\item[{\mbox{\hyperlink{structFTIT__execution}{F\+T\+I\+T\+\_\+execution}} $\ast$}]{F\+T\+I\+\_\+\+Exec,  }\item[{\mbox{\hyperlink{structFTIT__topology}{F\+T\+I\+T\+\_\+topology}} $\ast$}]{F\+T\+I\+\_\+\+Topo,  }\item[{int}]{ID }\end{DoxyParamCaption})}



This function triggers the asynchronous stage. 


\begin{DoxyParams}{Parameters}
{\em string} & \textquotesingle{}lpath\textquotesingle{}, absolute path of local file \\
\hline
{\em string} & \textquotesingle{}rpath\textquotesingle{}, absolute path of remote file \\
\hline
{\em F\+T\+I\+\_\+\+Exec} & Execution metadata. \\
\hline
{\em F\+T\+I\+\_\+\+Topo} & Topology metadata. \\
\hline
{\em F\+T\+I\+\_\+\+Conf} & Configuration metadata. \\
\hline
{\em integer} & \textquotesingle{}ID\textquotesingle{} of staging request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\textquotesingle{}F\+T\+I\+\_\+\+S\+C\+ES\textquotesingle{} on success, \textquotesingle{}F\+T\+I\+\_\+\+N\+S\+CS\textquotesingle{} else.
\end{DoxyReturn}
This function uses a non-\/blocking send (M\+P\+I\+\_\+\+Isend) in order to pass the information that is needed by the head process to perform an asynchronous staging of the local file to the P\+FS. \mbox{\Hypertarget{stage_8c_acf6cca854e653c7c23d24011f5b3afc4}\label{stage_8c_acf6cca854e653c7c23d24011f5b3afc4}} 
\index{stage.c@{stage.c}!FTI\_FinalizeStage@{FTI\_FinalizeStage}}
\index{FTI\_FinalizeStage@{FTI\_FinalizeStage}!stage.c@{stage.c}}
\doxysubsubsection{\texorpdfstring{FTI\_FinalizeStage()}{FTI\_FinalizeStage()}}
{\footnotesize\ttfamily void F\+T\+I\+\_\+\+Finalize\+Stage (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structFTIT__execution}{F\+T\+I\+T\+\_\+execution}} $\ast$}]{F\+T\+I\+\_\+\+Exec,  }\item[{\mbox{\hyperlink{structFTIT__topology}{F\+T\+I\+T\+\_\+topology}} $\ast$}]{F\+T\+I\+\_\+\+Topo,  }\item[{\mbox{\hyperlink{structFTIT__configuration}{F\+T\+I\+T\+\_\+configuration}} $\ast$}]{F\+T\+I\+\_\+\+Conf }\end{DoxyParamCaption})}



Finalizes staging feature. 


\begin{DoxyParams}{Parameters}
{\em F\+T\+I\+\_\+\+Exec} & Execution metadata. \\
\hline
{\em F\+T\+I\+\_\+\+Topo} & Topology metadata. \\
\hline
{\em F\+T\+I\+\_\+\+Conf} & Configuration metadata.\\
\hline
\end{DoxyParams}
This function frees allocated ressources, removes local staging files and the staging directory and destroys the node communicator \mbox{\Hypertarget{stage_8c_a6e74aba3e759272cbdb8db6ccbb879f2}\label{stage_8c_a6e74aba3e759272cbdb8db6ccbb879f2}} 
\index{stage.c@{stage.c}!FTI\_FreeStageRequest@{FTI\_FreeStageRequest}}
\index{FTI\_FreeStageRequest@{FTI\_FreeStageRequest}!stage.c@{stage.c}}
\doxysubsubsection{\texorpdfstring{FTI\_FreeStageRequest()}{FTI\_FreeStageRequest()}}
{\footnotesize\ttfamily int F\+T\+I\+\_\+\+Free\+Stage\+Request (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structFTIT__execution}{F\+T\+I\+T\+\_\+execution}} $\ast$}]{F\+T\+I\+\_\+\+Exec,  }\item[{\mbox{\hyperlink{structFTIT__topology}{F\+T\+I\+T\+\_\+topology}} $\ast$}]{F\+T\+I\+\_\+\+Topo,  }\item[{int}]{ID,  }\item[{int}]{source }\end{DoxyParamCaption})}



frees stage meta info element (head/application rank) 


\begin{DoxyParams}{Parameters}
{\em F\+T\+I\+\_\+\+Exec} & Execution metadata. \\
\hline
{\em F\+T\+I\+\_\+\+Topo} & Topology metadata. \\
\hline
{\em integer} & \textquotesingle{}ID\textquotesingle{} of staging request \\
\hline
{\em integer} & \textquotesingle{}source\textquotesingle{}, application rank of stage request\\
\hline
\end{DoxyParams}
This function eliminates the \textquotesingle{}ID\textquotesingle{} corresponding element from the stage meta info array and frees the corresponding memory. In the application ranks it also reorders the index information in the \textquotesingle{}idx\+RequestÃ„ array corresponding to \textquotesingle{}ID\textquotesingle{}. \mbox{\Hypertarget{stage_8c_a1b29cd8c8e9446f2dbd8dafac4d07f05}\label{stage_8c_a1b29cd8c8e9446f2dbd8dafac4d07f05}} 
\index{stage.c@{stage.c}!FTI\_GetRequestField@{FTI\_GetRequestField}}
\index{FTI\_GetRequestField@{FTI\_GetRequestField}!stage.c@{stage.c}}
\doxysubsubsection{\texorpdfstring{FTI\_GetRequestField()}{FTI\_GetRequestField()}}
{\footnotesize\ttfamily int F\+T\+I\+\_\+\+Get\+Request\+Field (\begin{DoxyParamCaption}\item[{int}]{ID,  }\item[{\mbox{\hyperlink{stage_8h_a05ee3f86e04233d44812d99f1ce02f98}{F\+T\+I\+T\+\_\+\+Request\+Field}}}]{val }\end{DoxyParamCaption})}



Returns value from the \textquotesingle{}idx\+Request\textquotesingle{} field array at \textquotesingle{}ID\textquotesingle{}. 


\begin{DoxyParams}{Parameters}
{\em integer} & \textquotesingle{}ID\textquotesingle{} of staging request \\
\hline
{\em F\+T\+I\+T\+\_\+\+Status\+Field} & requested field \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Field value on success, \textquotesingle{}F\+T\+I\+\_\+\+N\+S\+CS\textquotesingle{} else. 
\end{DoxyReturn}
Here is the call graph for this function\+:
% FIG 1
\mbox{\Hypertarget{stage_8c_af704cfca36ed0ca9ab685a838518c114}\label{stage_8c_af704cfca36ed0ca9ab685a838518c114}} 
\index{stage.c@{stage.c}!FTI\_GetRequestID@{FTI\_GetRequestID}}
\index{FTI\_GetRequestID@{FTI\_GetRequestID}!stage.c@{stage.c}}
\doxysubsubsection{\texorpdfstring{FTI\_GetRequestID()}{FTI\_GetRequestID()}}
{\footnotesize\ttfamily int F\+T\+I\+\_\+\+Get\+Request\+ID (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structFTIT__execution}{F\+T\+I\+T\+\_\+execution}} $\ast$}]{F\+T\+I\+\_\+\+Exec,  }\item[{\mbox{\hyperlink{structFTIT__topology}{F\+T\+I\+T\+\_\+topology}} $\ast$}]{F\+T\+I\+\_\+\+Topo }\end{DoxyParamCaption})}



Returns unique \textquotesingle{}ID\textquotesingle{} for staging request. 


\begin{DoxyParams}{Parameters}
{\em F\+T\+I\+\_\+\+Exec} & Execution metadata. \\
\hline
{\em F\+T\+I\+\_\+\+Topo} & Topology metadata. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\textquotesingle{}ID\textquotesingle{} on success, -\/1 else. 
\end{DoxyReturn}
\mbox{\Hypertarget{stage_8c_a0c5a2182e719ef3336289bd24f8fd312}\label{stage_8c_a0c5a2182e719ef3336289bd24f8fd312}} 
\index{stage.c@{stage.c}!FTI\_GetRequestIdx@{FTI\_GetRequestIdx}}
\index{FTI\_GetRequestIdx@{FTI\_GetRequestIdx}!stage.c@{stage.c}}
\doxysubsubsection{\texorpdfstring{FTI\_GetRequestIdx()}{FTI\_GetRequestIdx()}}
{\footnotesize\ttfamily int F\+T\+I\+\_\+\+Get\+Request\+Idx (\begin{DoxyParamCaption}\item[{int}]{ID }\end{DoxyParamCaption})}



returns the index of desired stage meta info element. 


\begin{DoxyParams}{Parameters}
{\em integer} & \textquotesingle{}ID\textquotesingle{} of staging request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
index if \textquotesingle{}ID\textquotesingle{} corresponding meta info structure was allocated -\/1, else. 
\end{DoxyReturn}
Here is the call graph for this function\+:
% FIG 2
\mbox{\Hypertarget{stage_8c_a03ebd25f6254d11bc790e70e9aabd9eb}\label{stage_8c_a03ebd25f6254d11bc790e70e9aabd9eb}} 
\index{stage.c@{stage.c}!FTI\_GetStatusField@{FTI\_GetStatusField}}
\index{FTI\_GetStatusField@{FTI\_GetStatusField}!stage.c@{stage.c}}
\doxysubsubsection{\texorpdfstring{FTI\_GetStatusField()}{FTI\_GetStatusField()}}
{\footnotesize\ttfamily int F\+T\+I\+\_\+\+Get\+Status\+Field (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structFTIT__execution}{F\+T\+I\+T\+\_\+execution}} $\ast$}]{F\+T\+I\+\_\+\+Exec,  }\item[{\mbox{\hyperlink{structFTIT__topology}{F\+T\+I\+T\+\_\+topology}} $\ast$}]{F\+T\+I\+\_\+\+Topo,  }\item[{int}]{ID,  }\item[{\mbox{\hyperlink{stage_8h_a90a1c70f104f770eff8ba0b2febc7887}{F\+T\+I\+T\+\_\+\+Status\+Field}}}]{val,  }\item[{int}]{source }\end{DoxyParamCaption})}



Returns value from the \textquotesingle{}status\textquotesingle{} field array at \textquotesingle{}ID\textquotesingle{}. 


\begin{DoxyParams}{Parameters}
{\em F\+T\+I\+\_\+\+Exec} & Execution metadata. \\
\hline
{\em F\+T\+I\+\_\+\+Topo} & Topology metadata. \\
\hline
{\em integer} & \textquotesingle{}ID\textquotesingle{} of staging request \\
\hline
{\em F\+T\+I\+T\+\_\+\+Status\+Field} & requested field \\
\hline
{\em integer} & \textquotesingle{}source\textquotesingle{}, application rank of stage request. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Field value on success, \textquotesingle{}F\+T\+I\+\_\+\+N\+S\+CS\textquotesingle{} else. 
\end{DoxyReturn}
\mbox{\Hypertarget{stage_8c_a7e59d3bafaa826d69a91493c80a417e3}\label{stage_8c_a7e59d3bafaa826d69a91493c80a417e3}} 
\index{stage.c@{stage.c}!FTI\_HandleStageRequest@{FTI\_HandleStageRequest}}
\index{FTI\_HandleStageRequest@{FTI\_HandleStageRequest}!stage.c@{stage.c}}
\doxysubsubsection{\texorpdfstring{FTI\_HandleStageRequest()}{FTI\_HandleStageRequest()}}
{\footnotesize\ttfamily int F\+T\+I\+\_\+\+Handle\+Stage\+Request (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structFTIT__configuration}{F\+T\+I\+T\+\_\+configuration}} $\ast$}]{F\+T\+I\+\_\+\+Conf,  }\item[{\mbox{\hyperlink{structFTIT__execution}{F\+T\+I\+T\+\_\+execution}} $\ast$}]{F\+T\+I\+\_\+\+Exec,  }\item[{\mbox{\hyperlink{structFTIT__topology}{F\+T\+I\+T\+\_\+topology}} $\ast$}]{F\+T\+I\+\_\+\+Topo,  }\item[{\mbox{\hyperlink{structFTIT__checkpoint}{F\+T\+I\+T\+\_\+checkpoint}} $\ast$}]{F\+T\+I\+\_\+\+Ckpt,  }\item[{int}]{source }\end{DoxyParamCaption})}



This function asynchronously stages the local file to the P\+FS. 


\begin{DoxyParams}{Parameters}
{\em string} & \textquotesingle{}lpath\textquotesingle{}, absolute path of local file. \\
\hline
{\em string} & \textquotesingle{}rpath\textquotesingle{}, absolute path of remote file. \\
\hline
{\em F\+T\+I\+\_\+\+Exec} & Execution metadata. \\
\hline
{\em F\+T\+I\+\_\+\+Topo} & Topology metadata. \\
\hline
{\em F\+T\+I\+\_\+\+Conf} & Configuration metadata. \\
\hline
{\em integer} & \textquotesingle{}source\textquotesingle{}, application rank of stage request. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\textquotesingle{}F\+T\+I\+\_\+\+S\+C\+ES\textquotesingle{} on success, \textquotesingle{}F\+T\+I\+\_\+\+N\+S\+CS\textquotesingle{} else. ~\newline
 
\end{DoxyReturn}
\mbox{\Hypertarget{stage_8c_a46b8c1f1c37f48eb4261fc646e460478}\label{stage_8c_a46b8c1f1c37f48eb4261fc646e460478}} 
\index{stage.c@{stage.c}!FTI\_InitStage@{FTI\_InitStage}}
\index{FTI\_InitStage@{FTI\_InitStage}!stage.c@{stage.c}}
\doxysubsubsection{\texorpdfstring{FTI\_InitStage()}{FTI\_InitStage()}}
{\footnotesize\ttfamily int F\+T\+I\+\_\+\+Init\+Stage (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structFTIT__execution}{F\+T\+I\+T\+\_\+execution}} $\ast$}]{F\+T\+I\+\_\+\+Exec,  }\item[{\mbox{\hyperlink{structFTIT__configuration}{F\+T\+I\+T\+\_\+configuration}} $\ast$}]{F\+T\+I\+\_\+\+Conf,  }\item[{\mbox{\hyperlink{structFTIT__topology}{F\+T\+I\+T\+\_\+topology}} $\ast$}]{F\+T\+I\+\_\+\+Topo }\end{DoxyParamCaption})}



Initializes the F\+TI staging feature. 


\begin{DoxyParams}{Parameters}
{\em F\+T\+I\+\_\+\+Exec} & Execution metadata. \\
\hline
{\em F\+T\+I\+\_\+\+Conf} & Configuration metadata. \\
\hline
{\em F\+T\+I\+\_\+\+Topo} & Topology metadata.\\
\hline
\end{DoxyParams}
This function allocates memory for the \textquotesingle{}idx\+Request\textquotesingle{} and \textquotesingle{}status\textquotesingle{} fields, creates a node communicator and an M\+PI shared memory window. \mbox{\Hypertarget{stage_8c_add93ac9ae93c0bc729d2d68f1617341c}\label{stage_8c_add93ac9ae93c0bc729d2d68f1617341c}} 
\index{stage.c@{stage.c}!FTI\_InitStageRequestApp@{FTI\_InitStageRequestApp}}
\index{FTI\_InitStageRequestApp@{FTI\_InitStageRequestApp}!stage.c@{stage.c}}
\doxysubsubsection{\texorpdfstring{FTI\_InitStageRequestApp()}{FTI\_InitStageRequestApp()}}
{\footnotesize\ttfamily int F\+T\+I\+\_\+\+Init\+Stage\+Request\+App (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structFTIT__execution}{F\+T\+I\+T\+\_\+execution}} $\ast$}]{F\+T\+I\+\_\+\+Exec,  }\item[{\mbox{\hyperlink{structFTIT__topology}{F\+T\+I\+T\+\_\+topology}} $\ast$}]{F\+T\+I\+\_\+\+Topo,  }\item[{uint32\+\_\+t}]{ID }\end{DoxyParamCaption})}



Initializes new stage meta info element (application rank) 


\begin{DoxyParams}{Parameters}
{\em F\+T\+I\+\_\+\+Exec} & Execution metadata. \\
\hline
{\em F\+T\+I\+\_\+\+Topo} & Topology metadata. \\
\hline
{\em integer} & \textquotesingle{}ID\textquotesingle{} of staging request\\
\hline
\end{DoxyParams}
This function appends a new staging meta info element for the application ranks to \textquotesingle{}F\+T\+I\+\_\+\+Exec-\/$>$stage\+Info-\/$>$request\textquotesingle{}. Beside that it also initializes the status field (status -\/$>$ pending) corresponding to \textquotesingle{}ID\textquotesingle{} and assigns the proper index of the meta info element to the \textquotesingle{}ID\textquotesingle{} corresponding \textquotesingle{}idx\+Request\textquotesingle{} field. \mbox{\Hypertarget{stage_8c_ae4b37a2f01edc58f583e828993eda152}\label{stage_8c_ae4b37a2f01edc58f583e828993eda152}} 
\index{stage.c@{stage.c}!FTI\_InitStageRequestHead@{FTI\_InitStageRequestHead}}
\index{FTI\_InitStageRequestHead@{FTI\_InitStageRequestHead}!stage.c@{stage.c}}
\doxysubsubsection{\texorpdfstring{FTI\_InitStageRequestHead()}{FTI\_InitStageRequestHead()}}
{\footnotesize\ttfamily int F\+T\+I\+\_\+\+Init\+Stage\+Request\+Head (\begin{DoxyParamCaption}\item[{char $\ast$}]{lpath,  }\item[{char $\ast$}]{rpath,  }\item[{\mbox{\hyperlink{structFTIT__execution}{F\+T\+I\+T\+\_\+execution}} $\ast$}]{F\+T\+I\+\_\+\+Exec,  }\item[{\mbox{\hyperlink{structFTIT__topology}{F\+T\+I\+T\+\_\+topology}} $\ast$}]{F\+T\+I\+\_\+\+Topo,  }\item[{int}]{source,  }\item[{uint32\+\_\+t}]{ID }\end{DoxyParamCaption})}



Initializes new stage meta info element (head rank) 


\begin{DoxyParams}{Parameters}
{\em string} & \textquotesingle{}lpath\textquotesingle{}, absolute path of local file \\
\hline
{\em string} & \textquotesingle{}rpath\textquotesingle{}, absolute path of remote file \\
\hline
{\em F\+T\+I\+\_\+\+Exec} & Execution metadata. \\
\hline
{\em F\+T\+I\+\_\+\+Topo} & Topology metadata. \\
\hline
{\em integer} & \textquotesingle{}source\textquotesingle{}, application rank of stage request \\
\hline
{\em integer} & \textquotesingle{}ID\textquotesingle{} of staging request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\textquotesingle{}F\+T\+I\+\_\+\+S\+C\+ES\textquotesingle{} on success, \textquotesingle{}F\+T\+I\+\_\+\+N\+S\+CS\textquotesingle{} else. ~\newline

\end{DoxyReturn}
This function appends a new staging meta info element for the head ranks to \textquotesingle{}F\+T\+I\+\_\+\+Exec-\/$>$stage\+Info-\/$>$request\textquotesingle{}. Beside that it also changes the status field corresponding to \textquotesingle{}ID\textquotesingle{} (status -\/$>$ active). \mbox{\Hypertarget{stage_8c_a11011f5e2b91e35d66c5c39d33aa0aae}\label{stage_8c_a11011f5e2b91e35d66c5c39d33aa0aae}} 
\index{stage.c@{stage.c}!FTI\_PrintStageStatus@{FTI\_PrintStageStatus}}
\index{FTI\_PrintStageStatus@{FTI\_PrintStageStatus}!stage.c@{stage.c}}
\doxysubsubsection{\texorpdfstring{FTI\_PrintStageStatus()}{FTI\_PrintStageStatus()}}
{\footnotesize\ttfamily void F\+T\+I\+\_\+\+Print\+Stage\+Status (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structFTIT__execution}{F\+T\+I\+T\+\_\+execution}} $\ast$}]{F\+T\+I\+\_\+\+Exec,  }\item[{\mbox{\hyperlink{structFTIT__topology}{F\+T\+I\+T\+\_\+topology}} $\ast$}]{F\+T\+I\+\_\+\+Topo,  }\item[{int}]{ID,  }\item[{int}]{source }\end{DoxyParamCaption})}

\mbox{\Hypertarget{stage_8c_a35eb6e7616b99b2d7713d802327fe061}\label{stage_8c_a35eb6e7616b99b2d7713d802327fe061}} 
\index{stage.c@{stage.c}!FTI\_SetRequestField@{FTI\_SetRequestField}}
\index{FTI\_SetRequestField@{FTI\_SetRequestField}!stage.c@{stage.c}}
\doxysubsubsection{\texorpdfstring{FTI\_SetRequestField()}{FTI\_SetRequestField()}}
{\footnotesize\ttfamily int F\+T\+I\+\_\+\+Set\+Request\+Field (\begin{DoxyParamCaption}\item[{int}]{ID,  }\item[{uint32\+\_\+t}]{entry,  }\item[{\mbox{\hyperlink{stage_8h_a05ee3f86e04233d44812d99f1ce02f98}{F\+T\+I\+T\+\_\+\+Request\+Field}}}]{val }\end{DoxyParamCaption})}



Sets value of the \textquotesingle{}idx\+Request\textquotesingle{} field array at \textquotesingle{}ID\textquotesingle{}. 


\begin{DoxyParams}{Parameters}
{\em integer} & \textquotesingle{}ID\textquotesingle{} of staging request \\
\hline
{\em integer} & \textquotesingle{}entry\textquotesingle{}, new value of field \\
\hline
{\em F\+T\+I\+T\+\_\+\+Status\+Field} & requested field \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\textquotesingle{}entry\textquotesingle{} on success, \textquotesingle{}F\+T\+I\+\_\+\+N\+S\+CS\textquotesingle{} else. 
\end{DoxyReturn}
Here is the call graph for this function\+:
% FIG 3
\mbox{\Hypertarget{stage_8c_ab210803902592adb2ebb22b9a9a28dda}\label{stage_8c_ab210803902592adb2ebb22b9a9a28dda}} 
\index{stage.c@{stage.c}!FTI\_SetStatusField@{FTI\_SetStatusField}}
\index{FTI\_SetStatusField@{FTI\_SetStatusField}!stage.c@{stage.c}}
\doxysubsubsection{\texorpdfstring{FTI\_SetStatusField()}{FTI\_SetStatusField()}}
{\footnotesize\ttfamily int F\+T\+I\+\_\+\+Set\+Status\+Field (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structFTIT__execution}{F\+T\+I\+T\+\_\+execution}} $\ast$}]{F\+T\+I\+\_\+\+Exec,  }\item[{\mbox{\hyperlink{structFTIT__topology}{F\+T\+I\+T\+\_\+topology}} $\ast$}]{F\+T\+I\+\_\+\+Topo,  }\item[{int}]{ID,  }\item[{uint8\+\_\+t}]{entry,  }\item[{\mbox{\hyperlink{stage_8h_a90a1c70f104f770eff8ba0b2febc7887}{F\+T\+I\+T\+\_\+\+Status\+Field}}}]{val,  }\item[{int}]{source }\end{DoxyParamCaption})}



Sets value from the \textquotesingle{}status\textquotesingle{} field array at \textquotesingle{}ID\textquotesingle{}. 


\begin{DoxyParams}{Parameters}
{\em F\+T\+I\+\_\+\+Exec} & Execution metadata. \\
\hline
{\em F\+T\+I\+\_\+\+Topo} & Topology metadata. \\
\hline
{\em integer} & \textquotesingle{}ID\textquotesingle{} of staging request \\
\hline
{\em integer} & \textquotesingle{}entry\textquotesingle{}, new value of field \\
\hline
{\em F\+T\+I\+T\+\_\+\+Status\+Field} & requested field \\
\hline
{\em integer} & \textquotesingle{}source\textquotesingle{}, application rank of stage request. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\textquotesingle{}entry\textquotesingle{} value on success, \textquotesingle{}F\+T\+I\+\_\+\+N\+S\+CS\textquotesingle{} else. 
\end{DoxyReturn}
\mbox{\Hypertarget{stage_8c_a182f1f60a5374160a724cee0034c572d}\label{stage_8c_a182f1f60a5374160a724cee0034c572d}} 
\index{stage.c@{stage.c}!FTI\_SyncStage@{FTI\_SyncStage}}
\index{FTI\_SyncStage@{FTI\_SyncStage}!stage.c@{stage.c}}
\doxysubsubsection{\texorpdfstring{FTI\_SyncStage()}{FTI\_SyncStage()}}
{\footnotesize\ttfamily int F\+T\+I\+\_\+\+Sync\+Stage (\begin{DoxyParamCaption}\item[{char $\ast$}]{lpath,  }\item[{char $\ast$}]{rpath,  }\item[{\mbox{\hyperlink{structFTIT__execution}{F\+T\+I\+T\+\_\+execution}} $\ast$}]{F\+T\+I\+\_\+\+Exec,  }\item[{\mbox{\hyperlink{structFTIT__topology}{F\+T\+I\+T\+\_\+topology}} $\ast$}]{F\+T\+I\+\_\+\+Topo,  }\item[{\mbox{\hyperlink{structFTIT__configuration}{F\+T\+I\+T\+\_\+configuration}} $\ast$}]{F\+T\+I\+\_\+\+Conf,  }\item[{uint32\+\_\+t}]{ID }\end{DoxyParamCaption})}



This function synchronously stages the local file to the P\+FS. 


\begin{DoxyParams}{Parameters}
{\em string} & \textquotesingle{}lpath\textquotesingle{}, absolute path of local file \\
\hline
{\em string} & \textquotesingle{}rpath\textquotesingle{}, absolute path of remote file \\
\hline
{\em F\+T\+I\+\_\+\+Exec} & Execution metadata. \\
\hline
{\em F\+T\+I\+\_\+\+Topo} & Topology metadata. \\
\hline
{\em F\+T\+I\+\_\+\+Conf} & Configuration metadata. \\
\hline
{\em integer} & \textquotesingle{}ID\textquotesingle{} of staging request \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
\textquotesingle{}F\+T\+I\+\_\+\+S\+C\+ES\textquotesingle{} on success, \textquotesingle{}F\+T\+I\+\_\+\+N\+S\+CS\textquotesingle{} else. ~\newline

\end{DoxyReturn}
This function should be called only if the staging feature is enabled without the head process being enabled. 