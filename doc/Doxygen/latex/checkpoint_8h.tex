\hypertarget{checkpoint_8h}{}\doxysection{/home/bscuser/\+Documents/release/dev/fti/src/checkpoint.h File Reference}
\label{checkpoint_8h}\index{/home/bscuser/Documents/release/dev/fti/src/checkpoint.h@{/home/bscuser/Documents/release/dev/fti/src/checkpoint.h}}
This graph shows which files directly or indirectly include this file\+:
% FIG 0
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{checkpoint_8h_a8479ea8ec8132ae55da9a6573f3d7440}{F\+T\+I\+\_\+\+Update\+Iter\+Time}} (\mbox{\hyperlink{structFTIT__execution}{F\+T\+I\+T\+\_\+execution}} $\ast$F\+T\+I\+\_\+\+Exec)
\begin{DoxyCompactList}\small\item\em It updates the local and global mean iteration time. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{checkpoint_8h_a656858362954a335040262a54a0235ce}{F\+T\+I\+\_\+\+Write\+Ckpt}} (\mbox{\hyperlink{structFTIT__configuration}{F\+T\+I\+T\+\_\+configuration}} $\ast$F\+T\+I\+\_\+\+Conf, \mbox{\hyperlink{structFTIT__execution}{F\+T\+I\+T\+\_\+execution}} $\ast$F\+T\+I\+\_\+\+Exec, \mbox{\hyperlink{structFTIT__topology}{F\+T\+I\+T\+\_\+topology}} $\ast$F\+T\+I\+\_\+\+Topo, \mbox{\hyperlink{structFTIT__checkpoint}{F\+T\+I\+T\+\_\+checkpoint}} $\ast$F\+T\+I\+\_\+\+Ckpt, \mbox{\hyperlink{structFTIT__dataset}{F\+T\+I\+T\+\_\+dataset}} $\ast$F\+T\+I\+\_\+\+Data)
\begin{DoxyCompactList}\small\item\em It writes the checkpoint data in the target file. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{checkpoint_8h_a7f20285e1ca49847b7764bdd8ec21a9a}{F\+T\+I\+\_\+\+Write\+Sionlib}} (\mbox{\hyperlink{structFTIT__configuration}{F\+T\+I\+T\+\_\+configuration}} $\ast$F\+T\+I\+\_\+\+Conf, \mbox{\hyperlink{structFTIT__execution}{F\+T\+I\+T\+\_\+execution}} $\ast$F\+T\+I\+\_\+\+Exec, \mbox{\hyperlink{structFTIT__topology}{F\+T\+I\+T\+\_\+topology}} $\ast$F\+T\+I\+\_\+\+Topo, \mbox{\hyperlink{structFTIT__dataset}{F\+T\+I\+T\+\_\+dataset}} $\ast$F\+T\+I\+\_\+\+Data)
\item 
int \mbox{\hyperlink{checkpoint_8h_a304411ac19756871bac1eec1517bc57b}{F\+T\+I\+\_\+\+Post\+Ckpt}} (\mbox{\hyperlink{structFTIT__configuration}{F\+T\+I\+T\+\_\+configuration}} $\ast$F\+T\+I\+\_\+\+Conf, \mbox{\hyperlink{structFTIT__execution}{F\+T\+I\+T\+\_\+execution}} $\ast$F\+T\+I\+\_\+\+Exec, \mbox{\hyperlink{structFTIT__topology}{F\+T\+I\+T\+\_\+topology}} $\ast$F\+T\+I\+\_\+\+Topo, \mbox{\hyperlink{structFTIT__checkpoint}{F\+T\+I\+T\+\_\+checkpoint}} $\ast$F\+T\+I\+\_\+\+Ckpt)
\begin{DoxyCompactList}\small\item\em Decides wich action start depending on the ckpt. level. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{checkpoint_8h_a305fb1ae4c686e64fe62c9429d2f4f4c}{F\+T\+I\+\_\+\+Listen}} (\mbox{\hyperlink{structFTIT__configuration}{F\+T\+I\+T\+\_\+configuration}} $\ast$F\+T\+I\+\_\+\+Conf, \mbox{\hyperlink{structFTIT__execution}{F\+T\+I\+T\+\_\+execution}} $\ast$F\+T\+I\+\_\+\+Exec, \mbox{\hyperlink{structFTIT__topology}{F\+T\+I\+T\+\_\+topology}} $\ast$F\+T\+I\+\_\+\+Topo, \mbox{\hyperlink{structFTIT__checkpoint}{F\+T\+I\+T\+\_\+checkpoint}} $\ast$F\+T\+I\+\_\+\+Ckpt)
\begin{DoxyCompactList}\small\item\em It listens for checkpoint notifications. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{checkpoint_8h_a5fa0457202662dc64ce0194d6a205ba8}{F\+T\+I\+\_\+\+Handle\+Ckpt\+Request}} (\mbox{\hyperlink{structFTIT__configuration}{F\+T\+I\+T\+\_\+configuration}} $\ast$F\+T\+I\+\_\+\+Conf, \mbox{\hyperlink{structFTIT__execution}{F\+T\+I\+T\+\_\+execution}} $\ast$F\+T\+I\+\_\+\+Exec, \mbox{\hyperlink{structFTIT__topology}{F\+T\+I\+T\+\_\+topology}} $\ast$F\+T\+I\+\_\+\+Topo, \mbox{\hyperlink{structFTIT__checkpoint}{F\+T\+I\+T\+\_\+checkpoint}} $\ast$F\+T\+I\+\_\+\+Ckpt)
\begin{DoxyCompactList}\small\item\em handles checkpoint requests from application ranks (if head). \end{DoxyCompactList}\item 
int \mbox{\hyperlink{checkpoint_8h_af2639ac1591855cf76492628f74c07eb}{F\+T\+I\+\_\+\+Write}} (\mbox{\hyperlink{structFTIT__configuration}{F\+T\+I\+T\+\_\+configuration}} $\ast$F\+T\+I\+\_\+\+Conf, \mbox{\hyperlink{structFTIT__execution}{F\+T\+I\+T\+\_\+execution}} $\ast$F\+T\+I\+\_\+\+Exec, \mbox{\hyperlink{structFTIT__topology}{F\+T\+I\+T\+\_\+topology}} $\ast$F\+T\+I\+\_\+\+Topo, \mbox{\hyperlink{structFTIT__checkpoint}{F\+T\+I\+T\+\_\+checkpoint}} $\ast$F\+T\+I\+\_\+\+Ckpt, \mbox{\hyperlink{structFTIT__dataset}{F\+T\+I\+T\+\_\+dataset}} $\ast$F\+T\+I\+\_\+\+Data, \mbox{\hyperlink{fti-intern_8h_ae83015b55c5ff7c80ed77ba8a7cb6de4}{F\+T\+I\+T\+\_\+\+IO}} $\ast$F\+T\+I\+\_\+\+IO)
\begin{DoxyCompactList}\small\item\em Writes ckpt. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{checkpoint_8h_a5fa0457202662dc64ce0194d6a205ba8}\label{checkpoint_8h_a5fa0457202662dc64ce0194d6a205ba8}} 
\index{checkpoint.h@{checkpoint.h}!FTI\_HandleCkptRequest@{FTI\_HandleCkptRequest}}
\index{FTI\_HandleCkptRequest@{FTI\_HandleCkptRequest}!checkpoint.h@{checkpoint.h}}
\doxysubsubsection{\texorpdfstring{FTI\_HandleCkptRequest()}{FTI\_HandleCkptRequest()}}
{\footnotesize\ttfamily int F\+T\+I\+\_\+\+Handle\+Ckpt\+Request (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structFTIT__configuration}{F\+T\+I\+T\+\_\+configuration}} $\ast$}]{F\+T\+I\+\_\+\+Conf,  }\item[{\mbox{\hyperlink{structFTIT__execution}{F\+T\+I\+T\+\_\+execution}} $\ast$}]{F\+T\+I\+\_\+\+Exec,  }\item[{\mbox{\hyperlink{structFTIT__topology}{F\+T\+I\+T\+\_\+topology}} $\ast$}]{F\+T\+I\+\_\+\+Topo,  }\item[{\mbox{\hyperlink{structFTIT__checkpoint}{F\+T\+I\+T\+\_\+checkpoint}} $\ast$}]{F\+T\+I\+\_\+\+Ckpt }\end{DoxyParamCaption})}



handles checkpoint requests from application ranks (if head). 


\begin{DoxyParams}{Parameters}
{\em F\+T\+I\+\_\+\+Conf} & Configuration metadata. \\
\hline
{\em F\+T\+I\+\_\+\+Exec} & Execution metadata. \\
\hline
{\em F\+T\+I\+\_\+\+Topo} & Topology metadata. \\
\hline
{\em F\+T\+I\+\_\+\+Ckpt} & Checkpoint metadata. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
integer F\+T\+I\+\_\+\+S\+C\+ES if successful. 
\end{DoxyReturn}
\mbox{\Hypertarget{checkpoint_8h_a305fb1ae4c686e64fe62c9429d2f4f4c}\label{checkpoint_8h_a305fb1ae4c686e64fe62c9429d2f4f4c}} 
\index{checkpoint.h@{checkpoint.h}!FTI\_Listen@{FTI\_Listen}}
\index{FTI\_Listen@{FTI\_Listen}!checkpoint.h@{checkpoint.h}}
\doxysubsubsection{\texorpdfstring{FTI\_Listen()}{FTI\_Listen()}}
{\footnotesize\ttfamily int F\+T\+I\+\_\+\+Listen (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structFTIT__configuration}{F\+T\+I\+T\+\_\+configuration}} $\ast$}]{F\+T\+I\+\_\+\+Conf,  }\item[{\mbox{\hyperlink{structFTIT__execution}{F\+T\+I\+T\+\_\+execution}} $\ast$}]{F\+T\+I\+\_\+\+Exec,  }\item[{\mbox{\hyperlink{structFTIT__topology}{F\+T\+I\+T\+\_\+topology}} $\ast$}]{F\+T\+I\+\_\+\+Topo,  }\item[{\mbox{\hyperlink{structFTIT__checkpoint}{F\+T\+I\+T\+\_\+checkpoint}} $\ast$}]{F\+T\+I\+\_\+\+Ckpt }\end{DoxyParamCaption})}



It listens for checkpoint notifications. 


\begin{DoxyParams}{Parameters}
{\em F\+T\+I\+\_\+\+Conf} & Configuration metadata. \\
\hline
{\em F\+T\+I\+\_\+\+Exec} & Execution metadata. \\
\hline
{\em F\+T\+I\+\_\+\+Topo} & Topology metadata. \\
\hline
{\em F\+T\+I\+\_\+\+Ckpt} & Checkpoint metadata. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
integer F\+T\+I\+\_\+\+S\+C\+ES if successful. This function listens for notifications from the application processes and takes the required actions after notification. This function is only executed by the head of the nodes and its complementary with the F\+T\+I\+\_\+\+Checkpoint function in terms of communications. 
\end{DoxyReturn}
\mbox{\Hypertarget{checkpoint_8h_a304411ac19756871bac1eec1517bc57b}\label{checkpoint_8h_a304411ac19756871bac1eec1517bc57b}} 
\index{checkpoint.h@{checkpoint.h}!FTI\_PostCkpt@{FTI\_PostCkpt}}
\index{FTI\_PostCkpt@{FTI\_PostCkpt}!checkpoint.h@{checkpoint.h}}
\doxysubsubsection{\texorpdfstring{FTI\_PostCkpt()}{FTI\_PostCkpt()}}
{\footnotesize\ttfamily int F\+T\+I\+\_\+\+Post\+Ckpt (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structFTIT__configuration}{F\+T\+I\+T\+\_\+configuration}} $\ast$}]{F\+T\+I\+\_\+\+Conf,  }\item[{\mbox{\hyperlink{structFTIT__execution}{F\+T\+I\+T\+\_\+execution}} $\ast$}]{F\+T\+I\+\_\+\+Exec,  }\item[{\mbox{\hyperlink{structFTIT__topology}{F\+T\+I\+T\+\_\+topology}} $\ast$}]{F\+T\+I\+\_\+\+Topo,  }\item[{\mbox{\hyperlink{structFTIT__checkpoint}{F\+T\+I\+T\+\_\+checkpoint}} $\ast$}]{F\+T\+I\+\_\+\+Ckpt }\end{DoxyParamCaption})}



Decides wich action start depending on the ckpt. level. 


\begin{DoxyParams}{Parameters}
{\em F\+T\+I\+\_\+\+Conf} & Configuration metadata. \\
\hline
{\em F\+T\+I\+\_\+\+Exec} & Execution metadata. \\
\hline
{\em F\+T\+I\+\_\+\+Topo} & Topology metadata. \\
\hline
{\em F\+T\+I\+\_\+\+Ckpt} & Checkpoint metadata. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
integer F\+T\+I\+\_\+\+S\+C\+ES if successful.
\end{DoxyReturn}
This function launches the required action dependeing on the ckpt. level. It does that for each group (application process in the node) if executed by the head, or only locally if executed by an application process. The parameter pr determines if the for loops have 1 or number of App. procs. iterations. The group parameter helps determine the group\+ID in both cases. \mbox{\Hypertarget{checkpoint_8h_a8479ea8ec8132ae55da9a6573f3d7440}\label{checkpoint_8h_a8479ea8ec8132ae55da9a6573f3d7440}} 
\index{checkpoint.h@{checkpoint.h}!FTI\_UpdateIterTime@{FTI\_UpdateIterTime}}
\index{FTI\_UpdateIterTime@{FTI\_UpdateIterTime}!checkpoint.h@{checkpoint.h}}
\doxysubsubsection{\texorpdfstring{FTI\_UpdateIterTime()}{FTI\_UpdateIterTime()}}
{\footnotesize\ttfamily int F\+T\+I\+\_\+\+Update\+Iter\+Time (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structFTIT__execution}{F\+T\+I\+T\+\_\+execution}} $\ast$}]{F\+T\+I\+\_\+\+Exec }\end{DoxyParamCaption})}



It updates the local and global mean iteration time. 


\begin{DoxyParams}{Parameters}
{\em F\+T\+I\+\_\+\+Exec} & Execution metadata. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
integer F\+T\+I\+\_\+\+S\+C\+ES if successful.
\end{DoxyReturn}
This function updates the local and global mean iteration time. It also recomputes the checkpoint interval in iterations and corrects the next checkpointing iteration based on the observed mean iteration duration. \mbox{\Hypertarget{checkpoint_8h_af2639ac1591855cf76492628f74c07eb}\label{checkpoint_8h_af2639ac1591855cf76492628f74c07eb}} 
\index{checkpoint.h@{checkpoint.h}!FTI\_Write@{FTI\_Write}}
\index{FTI\_Write@{FTI\_Write}!checkpoint.h@{checkpoint.h}}
\doxysubsubsection{\texorpdfstring{FTI\_Write()}{FTI\_Write()}}
{\footnotesize\ttfamily int F\+T\+I\+\_\+\+Write (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structFTIT__configuration}{F\+T\+I\+T\+\_\+configuration}} $\ast$}]{F\+T\+I\+\_\+\+Conf,  }\item[{\mbox{\hyperlink{structFTIT__execution}{F\+T\+I\+T\+\_\+execution}} $\ast$}]{F\+T\+I\+\_\+\+Exec,  }\item[{\mbox{\hyperlink{structFTIT__topology}{F\+T\+I\+T\+\_\+topology}} $\ast$}]{F\+T\+I\+\_\+\+Topo,  }\item[{\mbox{\hyperlink{structFTIT__checkpoint}{F\+T\+I\+T\+\_\+checkpoint}} $\ast$}]{F\+T\+I\+\_\+\+Ckpt,  }\item[{\mbox{\hyperlink{structFTIT__dataset}{F\+T\+I\+T\+\_\+dataset}} $\ast$}]{F\+T\+I\+\_\+\+Data,  }\item[{\mbox{\hyperlink{fti-intern_8h_ae83015b55c5ff7c80ed77ba8a7cb6de4}{F\+T\+I\+T\+\_\+\+IO}} $\ast$}]{io }\end{DoxyParamCaption})}



Writes ckpt. 


\begin{DoxyParams}{Parameters}
{\em F\+T\+I\+\_\+\+Conf} & Configuration metadata. \\
\hline
{\em F\+T\+I\+\_\+\+Exec} & Execution metadata. \\
\hline
{\em F\+T\+I\+\_\+\+Topo} & Topology metadata. \\
\hline
{\em F\+T\+I\+\_\+\+Ckpt} & Checkpoint metadata. \\
\hline
{\em F\+T\+I\+\_\+\+Data} & Dataset metadata. \\
\hline
{\em io} & IO function pointers \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
integer F\+T\+I\+\_\+\+S\+C\+ES if successful.
\end{DoxyReturn}
This function performs a normal checkpoint by calling the respective file format procedures, initalize ckpt, write data, compute integrity and finalize files. \mbox{\Hypertarget{checkpoint_8h_a656858362954a335040262a54a0235ce}\label{checkpoint_8h_a656858362954a335040262a54a0235ce}} 
\index{checkpoint.h@{checkpoint.h}!FTI\_WriteCkpt@{FTI\_WriteCkpt}}
\index{FTI\_WriteCkpt@{FTI\_WriteCkpt}!checkpoint.h@{checkpoint.h}}
\doxysubsubsection{\texorpdfstring{FTI\_WriteCkpt()}{FTI\_WriteCkpt()}}
{\footnotesize\ttfamily int F\+T\+I\+\_\+\+Write\+Ckpt (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structFTIT__configuration}{F\+T\+I\+T\+\_\+configuration}} $\ast$}]{F\+T\+I\+\_\+\+Conf,  }\item[{\mbox{\hyperlink{structFTIT__execution}{F\+T\+I\+T\+\_\+execution}} $\ast$}]{F\+T\+I\+\_\+\+Exec,  }\item[{\mbox{\hyperlink{structFTIT__topology}{F\+T\+I\+T\+\_\+topology}} $\ast$}]{F\+T\+I\+\_\+\+Topo,  }\item[{\mbox{\hyperlink{structFTIT__checkpoint}{F\+T\+I\+T\+\_\+checkpoint}} $\ast$}]{F\+T\+I\+\_\+\+Ckpt,  }\item[{\mbox{\hyperlink{structFTIT__dataset}{F\+T\+I\+T\+\_\+dataset}} $\ast$}]{F\+T\+I\+\_\+\+Data }\end{DoxyParamCaption})}



It writes the checkpoint data in the target file. 


\begin{DoxyParams}{Parameters}
{\em F\+T\+I\+\_\+\+Conf} & Configuration metadata. \\
\hline
{\em F\+T\+I\+\_\+\+Exec} & Execution metadata. \\
\hline
{\em F\+T\+I\+\_\+\+Topo} & Topology metadata. \\
\hline
{\em F\+T\+I\+\_\+\+Ckpt} & Checkpoint metadata. \\
\hline
{\em F\+T\+I\+\_\+\+Data} & Dataset metadata. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
integer F\+T\+I\+\_\+\+S\+C\+ES if successful.
\end{DoxyReturn}
This function checks whether the checkpoint needs to be local or remote, opens the target file and writes dataset per dataset, the checkpoint data, it finally flushes and closes the checkpoint file. \mbox{\Hypertarget{checkpoint_8h_a7f20285e1ca49847b7764bdd8ec21a9a}\label{checkpoint_8h_a7f20285e1ca49847b7764bdd8ec21a9a}} 
\index{checkpoint.h@{checkpoint.h}!FTI\_WriteSionlib@{FTI\_WriteSionlib}}
\index{FTI\_WriteSionlib@{FTI\_WriteSionlib}!checkpoint.h@{checkpoint.h}}
\doxysubsubsection{\texorpdfstring{FTI\_WriteSionlib()}{FTI\_WriteSionlib()}}
{\footnotesize\ttfamily int F\+T\+I\+\_\+\+Write\+Sionlib (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structFTIT__configuration}{F\+T\+I\+T\+\_\+configuration}} $\ast$}]{F\+T\+I\+\_\+\+Conf,  }\item[{\mbox{\hyperlink{structFTIT__execution}{F\+T\+I\+T\+\_\+execution}} $\ast$}]{F\+T\+I\+\_\+\+Exec,  }\item[{\mbox{\hyperlink{structFTIT__topology}{F\+T\+I\+T\+\_\+topology}} $\ast$}]{F\+T\+I\+\_\+\+Topo,  }\item[{\mbox{\hyperlink{structFTIT__dataset}{F\+T\+I\+T\+\_\+dataset}} $\ast$}]{F\+T\+I\+\_\+\+Data }\end{DoxyParamCaption})}

