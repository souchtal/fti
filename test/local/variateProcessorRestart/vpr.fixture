#!/bin/bash

shortname()
{
    echo "vpr"
}

name()
{
    #echo "$(shortname) io=$(iolib_id_to_name $iolib) L=$level head=0 keep=0 inline=(1,1,1)"
    echo "$(shortname) head=$head icp=$icp recovervar=$recovervar"
}

setup()
{
    #cfgfile="/tmp/configfile"

    head=$1
    icp=$2
    recovervar=$3

    #fti_config_new "$cfgfile"
    #fti_config_set "$cfgfile" "head" "$head"
    #fti_config_set "$cfgfile" "keep_last_ckpt" "0"
}

teardown()
{
    unset head
    unset icp
    unset recovervar
    #rm -rf "$cfgfile"
}

runtest()
{
    #app_run_normal ./recoverVar/recoverVar.exe $cfgfile 1 $level 1
    #app_run_normal ./checkVPR.sh $head $icp $recovervar
    cd variateProcessorRestart
    bash checkVPR.sh $head $icp $recovervar
    
    assert_app_success $?
}